<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
<title>Gemini Green Dress - Celestial Confidence in One Swirl</title>
<meta name="description" content="Emerald wrap dress with adjustable ties, double-lined satin, and same-day shipping. Designed for Gemini-level plan changes.">

<!-- TikTok Pixel Code -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
  ttq.load('D3CVHNBC77U2RE92M7O0');
  ttq.page();
  ttq.track('ViewContent', {
    content_id: 'green-dress-gemini',
    content_type: 'product',
    content_name: 'Gemini Green Dress',
    price: 59,
    currency: 'USD',
    value: 59
  });
}(window, document, 'ttq');
</script>
<!-- End TikTok Pixel Code -->

<!-- Performance Meta -->
<meta name="theme-color" content="#1C5D42">
<meta name="color-scheme" content="light">

<!-- Critical Resource Hints -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="//analytics.google.com">

<!-- Preload Critical Hero Image -->
<link rel="preload" as="image" href="./images/product/product-01.jpeg" type="image/jpeg" fetchpriority="high">

<!-- Critical CSS - Ultra-Minimal -->
<style>
:root {
  --color-primary: #1C5D42;
  --color-primary-light: #2A7C57;
  --color-primary-dark: #123F2D;
  --color-secondary: #79D7A8;
  --color-accent: #79D7A8;
  --color-bg: #F4EFEB;
  --color-bg-alt: #E9F5EE;
  --color-text: #1B1D1A;
  --color-text-light: #5F665F;
  --color-border: #E1E6E1;
  --color-success: #79D7A8;
  --color-error: #C76B3D;
}

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;word-wrap:break-word;overflow-wrap:break-word}
html{overflow-x:hidden;max-width:100vw;scroll-behavior:smooth}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;color:var(--color-text);line-height:1.6;background:var(--color-bg);-webkit-font-smoothing:antialiased;overflow-x:hidden;max-width:100vw;position:relative}

/* Main Page Styles */
.main-content{display:block}
.announcement{background:var(--color-primary);color:#fff;text-align:center;padding:12px;font-size:14px;font-weight:500;position:relative;z-index:10}
.container{max-width:min(100%,1200px);margin:0 auto;padding:0 16px;overflow-x:hidden}
.product-hero{display:grid;grid-template-columns:1fr 1fr;gap:60px;padding:40px 20px;align-items:start;min-height:500px}
.gallery{position:sticky;top:20px;z-index:1}
.main-img{width:100%;max-width:100%;height:auto;border-radius:12px;aspect-ratio:533/800;object-fit:cover;background:#f8f8f8;will-change:transform;transition:opacity 0.3s ease;display:block}
.product-info{position:relative;z-index:2}
.product-info h1{font-size:clamp(28px,5vw,40px);font-weight:700;margin-bottom:10px;line-height:1.2;letter-spacing:-0.02em}
.tagline{color:#666;font-size:clamp(16px,3vw,18px);margin-bottom:20px;font-weight:400}
.price-box{display:flex;align-items:baseline;gap:15px;margin-bottom:30px;flex-wrap:wrap}
.price{font-size:clamp(28px,6vw,36px);font-weight:700;color:#000;letter-spacing:-0.02em}
.old-price{font-size:clamp(20px,4vw,24px);color:#999;text-decoration:line-through}
.badge{background:#dc3545;color:#fff;padding:4px 12px;border-radius:20px;font-size:14px;font-weight:600;white-space:nowrap}
.cta-btn{width:100%;padding:18px;font-size:18px;font-weight:700;border-radius:8px;border:none;cursor:pointer;margin-bottom:15px;transition:all 0.15s cubic-bezier(0.4,0,0.2,1);transform:translateZ(0);will-change:transform;position:relative;overflow:hidden;min-height:44px}
.cta-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s;z-index:1}
.cta-btn:hover::before{left:100%}
.cta-primary{background:var(--color-primary);color:#fff;box-shadow:0 2px 8px rgba(58,90,123,0.2)}
.cta-primary:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(58,90,123,0.3)}
.cta-secondary{background:#fff;color:var(--color-primary);border:2px solid rgba(28,93,66,0.25);box-shadow:0 4px 12px rgba(28,93,66,0.08)}
.cta-secondary:hover{border-color:var(--color-primary);transform:translateY(-2px)}
.cta-primary:active{transform:translateY(0) scale(0.98)}
.btn-subtitle{font-size:12px;font-weight:400;opacity:0.9;margin-top:4px;position:relative;z-index:2}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity 0.6s ease,transform 0.6s ease}
.fade-in.visible{opacity:1;transform:translateY(0)}
.sticky-cta{position:fixed;left:0;right:0;bottom:0;background:rgba(18,63,45,0.95);color:#fff;display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 20px;z-index:20;transform:translateY(120%);transition:transform 0.3s ease;box-shadow:0 -12px 30px rgba(0,0,0,0.15)}
.sticky-cta button{background:var(--color-secondary);color:var(--color-primary-dark);border:none;border-radius:999px;padding:12px 24px;font-weight:700;cursor:pointer}
.sticky-cta.visible{transform:translateY(0)}

/* Testimonial Styles */
.testimonial-card{background:#fff;border-radius:16px;padding:24px;box-shadow:0 2px 12px rgba(0,0,0,0.06);border:1px solid #f0f0f0}
.testimonial-header{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.testimonial-avatar{width:48px;height:48px;border-radius:50%;object-fit:cover}
.testimonial-info{flex:1}
.testimonial-name{font-weight:600;font-size:14px;margin-bottom:2px}
.testimonial-platform{display:flex;align-items:center;gap:6px;color:#666;font-size:12px}
.testimonial-platform svg{width:14px;height:14px}
.testimonial-stars{color:#ffc107;font-size:14px;letter-spacing:2px}
.testimonial-text{font-size:15px;line-height:1.6;color:#333}
.testimonial-date{color:#999;font-size:12px;margin-top:12px}

/* Accordion Styles */
.accordion-section{border:1px solid #e0e0e0;border-radius:8px;margin-bottom:12px;overflow:hidden;transition:all 0.3s ease}
.accordion-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#fff;cursor:pointer;user-select:none;font-weight:600;font-size:16px;transition:background 0.2s;min-height:44px}
.accordion-header:hover{background:#f8f9fa}
.accordion-header .icon-container{width:24px;height:24px;flex-shrink:0}
.accordion-arrow{width:24px;height:24px;transition:transform 0.3s}
.accordion-header.active .accordion-arrow{transform:rotate(180deg)}
.accordion-content{max-height:0;overflow:hidden;transition:max-height 0.3s ease,padding 0.3s ease;padding:0 20px}
.accordion-content.active{max-height:1000px;padding:20px;border-top:1px solid #f0f0f0}

/* Size Selector */
.size-btn{padding:14px 12px;border:2px solid #e0e0e0;background:#fff;border-radius:8px;cursor:pointer;font-weight:600;transition:all 0.2s;font-size:14px;min-width:44px;min-height:44px}
.size-btn:not(:disabled):hover{border-color:var(--color-primary);transform:scale(1.05)}
.size-btn.selected{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}
.size-btn:disabled{opacity:0.4;cursor:not-allowed}

/* Mobile Responsive */
@media(max-width:768px){
.product-hero{grid-template-columns:1fr;gap:30px;padding:20px 16px}
.gallery{position:static}
.container{padding:0 16px}
.cta-btn{font-size:16px;padding:16px;min-height:56px}
.size-btn{min-width:44px;min-height:44px}
.accordion-header{padding:14px 16px;font-size:15px}
.accordion-content{padding:16px}
.accordion-content.active{padding:16px}
body{font-size:16px;-webkit-text-size-adjust:100%;padding-bottom:110px}
h1{font-size:clamp(24px,6vw,32px);line-height:1.2}
h2{font-size:clamp(22px,5vw,28px)}
h3{font-size:clamp(18px,4vw,20px)}
p,.tagline{font-size:16px;line-height:1.6}
.main-content{padding-bottom:80px}
a,button,.size-btn,.accordion-header,[onclick],[role="button"]{min-height:44px;min-width:44px;display:inline-flex;align-items:center;justify-content:center}
}

@media(min-width:769px){
  .sticky-cta{display:none}
}

/* Ultra-small devices (320px) */
@media(max-width:375px){
.container{padding:0 12px}
.cta-btn{font-size:15px;padding:14px}
h1{font-size:24px}
}

@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(58,90,123,0.4)}50%{box-shadow:0 0 0 10px rgba(58,90,123,0)}}

/* Image & media overflow prevention */
img,video,iframe,canvas{max-width:100%;height:auto;display:block}
[style*='grid'],[style*='flex']{min-width:0;overflow-x:auto}
</style>

<!-- Prefetch Additional Images -->
<link rel="prefetch" as="image" href="./images/product/product-02.jpeg">
<link rel="prefetch" as="image" href="./images/product/product-03.jpeg">
</head>

<body>

<!-- Order Bump Popup -->
<div id="orderBumpPopup" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;align-items:center;justify-content:center;padding:20px">
  <div style="background:#fff;border-radius:16px;max-width:600px;width:100%;padding:40px;position:relative;box-shadow:0 20px 60px rgba(0,0,0,0.3);animation:fadeIn 0.3s ease">
    <button onclick="closeOrderBumpPopup()" style="position:absolute;top:20px;right:20px;background:none;border:none;font-size:28px;cursor:pointer;color:#999;line-height:1;padding:0;width:32px;height:32px">&times;</button>
    <div style="text-align:center;margin-bottom:30px">
      <div style="background:var(--color-primary);color:#fff;display:inline-block;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:700;margin-bottom:20px">COMPLETE YOUR GLOW-UP</div>
      <h2 style="font-size:28px;font-weight:700;margin-bottom:12px;color:#1a1a1a">Add Aura Care Kit?</h2>
      <p style="color:#666;font-size:16px">Steam wand + satin refresh spray to keep the emerald sheen.</p>
    </div>
    <div style="background:#f8f9fa;border-radius:12px;padding:24px;margin-bottom:30px">
      <div style="display:flex;gap:20px;align-items:center">
        <div style="flex:1">
          <h3 style="font-size:20px;font-weight:700;margin-bottom:8px">Aura Care Kit</h3>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin:6px 0;color:#555;font-size:14px">Travel-size garment steamer wand</li>
            <li style="margin:6px 0;color:#555;font-size:14px">Anti-static satin refresh spray</li>
            <li style="margin:6px 0;color:#555;font-size:14px">Crinkle brush for wrap ties</li>
            <li style="margin:6px 0;color:#555;font-size:14px">Extend the life of your dress</li>
          </ul>
        </div>
        <div style="text-align:center">
          <div style="font-size:14px;color:#999;text-decoration:line-through">$29</div>
          <div style="font-size:32px;font-weight:700;color:var(--color-primary)">$19</div>
          <div style="background:var(--color-primary);color:#fff;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:700;margin-top:8px">SAVE $10</div>
        </div>
      </div>
    </div>
    <div id="orderSummary" style="background:#fff;border:2px solid #e0e0e0;border-radius:12px;padding:20px;margin-bottom:24px">
      <!-- Dynamic order summary -->
    </div>
    <button onclick="acceptOrderBump()" style="width:100%;background:var(--color-primary);color:#fff;border:none;padding:18px;border-radius:12px;font-size:18px;font-weight:700;cursor:pointer;margin-bottom:12px;transition:all 0.2s">
      YES! ADD CARE KIT - $29 TOTAL
    </button>
    <button onclick="declineOrderBump()" style="width:100%;background:#fff;color:#666;border:2px solid #ddd;padding:14px;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s">
      No thanks, just the dress
    </button>
  </div>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
  <div class="announcement">GEMINI SEASON DROP · SHIPS WITHIN 24H</div>

  <div class="container">
    <div class="product-hero">
      <div class="gallery">
        <img class="main-img fade-in visible" id="heroImage" src="./images/product/product-01.jpeg" alt="Gemini green wrap dress" width="533" height="800" loading="eager" decoding="async">
        <div id="thumbs" style="display:flex;gap:10px;margin-top:15px;overflow-x:auto"></div>
      </div>

      <div class="product-info">
        <h1 class="fade-in visible">The Gemini Green Dress Lighting Up TikTok</h1>
        <p class="tagline fade-in visible">Celestial confidence, adjustable wrap waist, and an emerald glow that stays vivid on camera.</p>

        <div class="price-box fade-in visible" style="gap:18px;align-items:center">
          <span class="price">$59</span>
          <span class="old-price" style="font-size:20px;color:#8a8f8c">$128</span>
          <span class="badge" style="background:var(--color-primary);color:#fff">Same-day ship</span>
        </div>

        <p class="fade-in visible" style="color:#4b524b;margin-bottom:18px">
          Double-lined satin keeps things opaque, while the inner modesty snap and grippy back ties stop any slip during transitions.
        </p>

        <div class="fade-in visible" style="margin-bottom:20px">
          <div style="display:flex;justify-content:space-between;font-weight:600;color:#1b1d1a;margin-bottom:10px">
            <span>Select your size</span>
            <span id="selectedSizeLabel" style="font-size:13px;color:#5f665f">M ready to ship</span>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="size-btn" data-size="XS">XS</button>
            <button class="size-btn" data-size="S">S</button>
            <button class="size-btn selected" data-size="M">M</button>
            <button class="size-btn" data-size="L">L</button>
            <button class="size-btn" data-size="XL">XL</button>
          </div>
          <div class="size-note" style="font-size:12px;color:#666;margin-top:10px">Wrap belt customizes fit by ±2". Model wears S.</div>
        </div>

        <button class="cta-btn cta-primary fade-in visible" id="primaryCTA" onclick="handleAddToCart('primary')">
          GET THE GEMINI GLOW - $59
          <div class="btn-subtitle">Ships with free exchanges</div>
        </button>
        <button class="cta-btn cta-secondary fade-in visible" id="secondaryCTA" onclick="handleAddToCart('secondary')">
          Reserve Preorder - $19
          <div class="btn-subtitle">Includes fit concierge + early drop</div>
        </button>

        <!-- Guarantee Badge -->
        <div style="background:#f0fbf4;border:2px solid var(--color-primary);border-radius:12px;padding:16px;margin-top:20px;text-align:center">
          <div style="font-weight:700;font-size:16px;color:var(--color-primary);margin-bottom:4px">30-Day Glow Guarantee</div>
          <div style="color:#555;font-size:13px">Not feeling radiant? Send it back for an instant refund.</div>
        </div>

        <div style="display:flex;gap:20px;margin-top:20px;flex-wrap:wrap">
          <div style="display:flex;align-items:center;gap:8px;color:#666;font-size:14px">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
            Free exchanges
          </div>
          <div style="display:flex;align-items:center;gap:8px;color:#666;font-size:14px">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
            Ships in 24h
          </div>
          <div style="display:flex;align-items:center;gap:8px;color:#666;font-size:14px">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
            SimpleSwap checkout
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lazy Content Container -->
  <div id="lazyContent"></div>
</div>

<div class="sticky-cta" id="stickyCTA">
  <div>
    <div style="font-weight:700">Gemini Green Dress</div>
    <div style="font-size:13px;color:rgba(255,255,255,0.8)">$59 · Ships within 24h</div>
  </div>
  <button onclick="handleAddToCart('primary')">Get the Gemini Glow</button>
</div>

<script>
// Performance Metrics
const perfMetrics = { marks: {}, mark(name) { this.marks[name] = performance.now(); } };
perfMetrics.mark('script-start');

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', function() {
  loadThumbnails();
  loadRemainingContent();
  initSizeSelector();
  initStickyCTA();
  perfMetrics.mark('content-loaded');
});

// ESC key to close popup
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const popup = document.getElementById('orderBumpPopup');
    if (popup && popup.style.display === 'flex') {
      closeOrderBumpPopup();
    }
  }
});

// Click outside popup to close
document.getElementById('orderBumpPopup')?.addEventListener('click', function(e) {
  if (e.target === this) {
    closeOrderBumpPopup();
  }
});

// Product Images
const productImages = ['product-01.jpeg', 'product-02.jpeg', 'product-03.jpeg', 'product-04.jpeg', 'product-05.jpeg', 'product-06.jpeg'];
let selectedSize = 'M';

function loadThumbnails() {
  const thumbsContainer = document.getElementById('thumbs');
  thumbsContainer.innerHTML = '';

  productImages.forEach((src, i) => {
    const thumb = document.createElement('img');
    thumb.src = `./images/product/${src}`;
    thumb.alt = `Product view ${i + 1}`;
    thumb.loading = 'lazy';
    thumb.style.cssText = `width:80px;height:100px;border-radius:8px;cursor:pointer;border:2px solid ${i === 0 ? 'var(--color-primary)' : 'transparent'};object-fit:cover;transition:all 0.2s;max-width:100%`;
    thumb.onclick = () => switchMainImage(src, thumb);
    thumbsContainer.appendChild(thumb);
  });
}

function switchMainImage(src, thumbElement) {
  const heroImg = document.getElementById('heroImage');
  heroImg.src = `./images/product/${src}`;

  document.querySelectorAll('#thumbs img').forEach(t => t.style.borderColor = 'transparent');
  thumbElement.style.borderColor = 'var(--color-primary)';
}

function initSizeSelector() {
  const buttons = document.querySelectorAll('.size-btn');
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      selectedSize = btn.getAttribute('data-size');
      buttons.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      const label = document.getElementById('selectedSizeLabel');
      if (label) {
        label.textContent = `${selectedSize} selected`;
      }
    });
  });
  const initialLabel = document.getElementById('selectedSizeLabel');
  if (initialLabel) {
    initialLabel.textContent = `${selectedSize} selected`;
  }
}

function initStickyCTA() {
  const sticky = document.getElementById('stickyCTA');
  const hero = document.querySelector('.product-hero');
  if (!sticky || !hero) return;
  const onScroll = () => {
    const rect = hero.getBoundingClientRect();
    if (rect.bottom < window.innerHeight * 0.6) {
      sticky.classList.add('visible');
    } else {
      sticky.classList.remove('visible');
    }
  };
  document.addEventListener('scroll', onScroll);
  onScroll();
}

// SimpleSwap Pool Integration
const SIMPLESWAP_POOL_API = 'https://simpleswap-automation-1.onrender.com';
let requestInFlight = false;

function handleAddToCart(type) {
  if (type === 'primary') {
    processOrder(59);
  } else {
    showOrderBumpPopup(19);
  }
}

async function getExchangeFromPool(amountUSD) {
  if (requestInFlight) {
    console.log('[POOL] Request already in progress');
    return;
  }
  requestInFlight = true;
  try {
    const btn = document.querySelector('.cta-btn.cta-primary');
    const originalText = btn ? btn.innerHTML : '';
    if (btn) btn.innerHTML = 'Creating your order...<div class="btn-subtitle">Please wait</div>';

    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 15000);

    const response = await fetch(`${SIMPLESWAP_POOL_API}/buy-now`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amountUSD: amountUSD }),
      signal: controller.signal
    });

    clearTimeout(timeoutId);
    const data = await response.json();

    if (data.success && data.exchangeUrl) {
      window.location.href = data.exchangeUrl;
    } else {
      alert('Unable to create order. Please try again.');
      if (btn) btn.innerHTML = originalText;
    }
  } catch (error) {
    console.error('[POOL] Error:', error);
    alert(error.name === 'AbortError' ? 'Request timeout. Please try again.' : 'Payment error. Please try again.');
    const btn = document.querySelector('.cta-btn.cta-primary');
    if (btn) btn.innerHTML = 'GET THE GEMINI GLOW - $59<div class="btn-subtitle">Ships with free exchanges</div>';
  } finally {
    requestInFlight = false;
  }
}

async function processOrder(amountUSD) {
  if (typeof ttq !== 'undefined') {
    ttq.track('Purchase', {
      content_id: 'green-dress-gemini',
      content_type: 'product',
      content_name: 'Gemini Green Dress',
      price: amountUSD,
      quantity: 1,
      currency: 'USD',
      value: amountUSD,
      properties: {
        size: selectedSize
      }
    });
  }
  await getExchangeFromPool(amountUSD);
}

function showOrderBumpPopup(basePrice) {
  const bumpPrice = 10;
  const total = basePrice + bumpPrice;

  document.getElementById('orderSummary').innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <span style="color:#666">Gemini Green Dress preorder</span>
      <span style="font-weight:600">$${basePrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e0e0e0">
      <span style="color:var(--color-primary);font-weight:600">+ Aura Care Kit</span>
      <span style="font-weight:600;color:var(--color-primary)">$${bumpPrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <span style="font-size:18px;font-weight:700">Total</span>
      <span style="font-size:24px;font-weight:700;color:#000">$${total}</span>
    </div>
  `;

  document.getElementById('orderBumpPopup').style.display = 'flex';
  document.body.style.overflow = 'hidden';
  window.currentBasePrice = basePrice;
}

function closeOrderBumpPopup() {
  document.getElementById('orderBumpPopup').style.display = 'none';
  document.body.style.overflow = 'auto';
}

function acceptOrderBump() {
  closeOrderBumpPopup();
  processOrder(29);
}

function declineOrderBump() {
  closeOrderBumpPopup();
  processOrder(window.currentBasePrice || 19);
}

// SVG Platform Icons
const platformSVGs = {
  tiktok: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/></svg>`,
  instagram: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>`,
  facebook: `<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>`,
  trustpilot: `<svg viewBox="0 0 24 24" fill="#00b67a"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>`,
  google: `<svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>`
};

const platformColors = {
  tiktok: '#000000',
  instagram: '#E4405F',
  facebook: '#1877F2',
  trustpilot: '#00b67a',
  google: '#4285F4'
};

// Testimonial Data from agent-1b.json
const testimonials = [
  { name: "Lena P.", handle: "@lenapaints", platform: "tiktok", rating: 5, text: "Posted a get-ready-with-me in this dress and the comments blew up. The sheen catches studio lights perfectly.", date: "2025-12-01", img: 1 },
  { name: "Marisol V.", handle: "@mari.vibes", platform: "tiktok", rating: 4, text: "Love the twirl factor! Fabric is thicker than expected which is great, just wish shipping was a bit faster.", date: "2025-11-30", img: 2 },
  { name: "Keisha D.", handle: "@keishadrops", platform: "tiktok", rating: 5, text: "The tie waist lets me cinch it for date night then loosen for dancing. Total Gemini energy.", date: "2025-11-29", img: 3 },
  { name: "Hana K.", handle: "@hanaverse", platform: "tiktok", rating: 5, text: "Filmed a transition and the color stayed true even under neon club lights.", date: "2025-11-28", img: 4 },
  { name: "Gina T.", handle: "@ginatwist", platform: "tiktok", rating: 3, text: "Cute but I should have steamed it longer—wrinkles showed on my live. Still keeping it.", date: "2025-11-27", img: 5 },
  { name: "Zoie R.", handle: "@zoiesroom", platform: "tiktok", rating: 5, text: "Got 12k saves overnight. Everyone keeps asking where the 'enchanted green dress' is from.", date: "2025-11-26", img: 6 },
  { name: "Faith L.", handle: "@faithloops", platform: "tiktok", rating: 5, text: "The wrap stays put even when I'm filming choreo. No wardrobe scares!", date: "2025-11-25", img: 1 },
  { name: "Isela M.", handle: "@isela.moves", platform: "tiktok", rating: 4, text: "Color is richer IRL. Needed to pin the neckline but that's just my petite frame.", date: "2025-11-24", img: 2 },
  { name: "Roxie B.", handle: "@roxiebytes", platform: "tiktok", rating: 5, text: "My Gemini twin sis stole it already. We share but I want another one lol.", date: "2025-11-23", img: 3 },
  { name: "Taryn Q.", handle: "@tarynquick", platform: "tiktok", rating: 5, text: "Styled it with chunky boots and a moto jacket—people thought it was a designer sample.", date: "2025-11-22", img: 4 },
  { name: "Madi H.", handle: "@madihow", platform: "tiktok", rating: 4, text: "It swishes dramatically on camera. Hem is a tad long on my 5ft2 frame but easy to hem.", date: "2025-11-21", img: 5 },
  { name: "Noor E.", handle: "@noor.edit", platform: "tiktok", rating: 5, text: "Definietly the most flattering green in my closet. Matches my aura nails perfectly.", date: "2025-11-20", img: 6 },
  { name: "Sara L.", handle: "@glowbysara", platform: "instagram", rating: 5, text: "Shot a carousel in Santorini and the emerald made the blue domes pop.", date: "2025-11-19", img: 1 },
  { name: "Alicia W.", handle: "@aliciawears", platform: "instagram", rating: 4, text: "Only note is to order your true size; I sized up unnecessarily. Gorgeous otherwise.", date: "2025-11-18", img: 2 },
  { name: "Camille N.", handle: "@styledbycam", platform: "instagram", rating: 5, text: "My followers thought it was Reformation—quality feels similar but softer lining.", date: "2025-11-17", img: 3 },
  { name: "Ivanna K.", handle: "@ivanna.keeps", platform: "instagram", rating: 5, text: "Wore it to a rooftop wedding; stayed comfortable through 6 hours of toasts.", date: "2025-11-16", img: 4 },
  { name: "Brielle D.", handle: "@briellexoxo", platform: "instagram", rating: 3, text: "Hue is slightly cooler than the feed photo. Still photogenic though.", date: "2025-11-15", img: 5 },
  { name: "Jessi G.", handle: "@jessi.gem", platform: "instagram", rating: 5, text: "Stretch panel in the back makes it breathing-friendly after pasta.", date: "2025-11-14", img: 6 },
  { name: "Nadia T.", handle: "@nadia.traces", platform: "instagram", rating: 5, text: "Layered a mesh top underneath and it still sat smooth—no bunching.", date: "2025-11-13", img: 1 },
  { name: "Ona R.", handle: "@onarumi", platform: "instagram", rating: 5, text: "Everyone DM'd me asking for the link. The waist snatch is unreal.", date: "2025-11-12", img: 2 },
  { name: "Cheryl P.", handle: "CherylP", platform: "facebook", rating: 5, text: "Bought for my daughter's graduation. The adjustable straps meant one dress worked for rehearsal and ceremony.", date: "2025-11-11", img: 3 },
  { name: "Greta S.", handle: "GretaSews", platform: "facebook", rating: 4, text: "Seam finishing is neat, which is the first thing I check as a sewist. Arrived a day late though.", date: "2025-11-10", img: 4 },
  { name: "Lydia B.", handle: "LydiaB", platform: "facebook", rating: 5, text: "Wore it to book club and everyone assumed it was custom dyed.", date: "2025-11-09", img: 5 },
  { name: "Tamara F.", handle: "TamF", platform: "facebook", rating: 4, text: "I pair it with a cropped cardigan for work—drapes nicely even when seated.", date: "2025-11-08", img: 6 },
  { name: "Owen C.", handle: "OwenC", platform: "trustpilot", rating: 5, text: "Customer care replied within minutes when I changed sizes. Dress fits perfectly now.", date: "2025-11-07", img: 1 },
  { name: "Delia R.", handle: "DeliaR", platform: "trustpilot", rating: 4, text: "Packaging was eco-friendly and cute. Only gripe is minor threads to snip.", date: "2025-11-06", img: 2 },
  { name: "Irene M.", handle: "IreneM", platform: "trustpilot", rating: 5, text: "Recieved compliments from strangers twice in the same afternoon.", date: "2025-11-05", img: 3 },
  { name: "Priya S.", handle: "PriyaStyle", platform: "google", rating: 5, text: "Love that the lining is breathable—no sticking even in Miami humidity.", date: "2025-11-04", img: 4 },
  { name: "Callie V.", handle: "CallieV", platform: "google", rating: 4, text: "Color stayed vibrant after two gentle cycles. Followed their wash guide and it worked.", date: "2025-11-03", img: 5 },
  { name: "June Y.", handle: "JuneY", platform: "google", rating: 5, text: "Zip is smooth and hidden; looks luxe without the price tag.", date: "2025-11-02", img: 6 },
];

// Accordion functionality
function toggleAccordion(element) {
  const content = element.nextElementSibling;
  const isActive = element.classList.contains('active');

  if (isActive) {
    element.classList.remove('active');
    content.classList.remove('active');
  } else {
    element.classList.add('active');
    content.classList.add('active');
  }
}

// Load Remaining Content
function loadRemainingContent() {
  const lazyContent = document.getElementById('lazyContent');

  lazyContent.innerHTML = `
    <!-- Product Details Accordion -->
    <div class="fade-in" style="padding:40px 20px;border-top:1px solid #f0f0f0;max-width:1200px;margin:0 auto">
      <h2 style="margin-bottom:30px;font-weight:700;font-size:24px;text-align:center">Product Details</h2>

      <!-- Description -->
      <div class="accordion-section">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="icon-container"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.3 5.2c-.8.4-1.2.8-5.8 5.9-2.7 3-5.3 5.9-5.8 6.5-.8 1-1.1 1.2-1.6 1-1.1-.4-6.2-5.7-6.6-6.8-.3-.8-.3-1.3.1-2 .5-.9 1.4-1.3 2.4-1.1.6.1 1.1.6 3.2 2.8 1.3 1.4 2.4 2.5 2.5 2.5.1 0 2.1-2.3 4.5-5.1 3.9-4.6 4.4-5.1 5.4-5.5 1.4-.6 2.8-.3 3.7.7.7.8.8 1.9.3 2.8-.3.5-.8.9-1.3 1.3-.3.2-.5.3-1 0z" fill="var(--color-success)"/><path d="M8.9 13.2c-.1.1-1.2-1-2.5-2.5-2.1-2.2-2.6-2.7-3.2-2.8-.4-.1-.8 0-1.2.3-.3.3-.5.7-.5 1.2 0 .6.2.9 2.9 3.8 1.6 1.7 3.1 3.2 3.4 3.4.5.3.6.3 1.1 0 .3-.2 1.5-1.5 2.7-2.9l2.1-2.5c.1-.2-.5.4-2.1 2.5-1.2 1.4-2.4 2.7-2.7 2.9-.2.1-.3.2-.4.2-.1 0-.3-.3-.6-.6z" fill="var(--color-primary)" opacity=".6"/></svg></div>
            <span>Description</span>
          </div>
          <svg class="accordion-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7.8c-.4.2-.7.6-.8 1.1-.1.7.1 1.2.6 1.7l5.3 5.3c.4.4.7.6 1.2.7.7.1 1.2-.1 1.7-.6l5.3-5.3c.5-.5.7-1 .6-1.7-.1-.5-.4-.9-.8-1.1-.5-.2-1-.1-1.5.3-.1.1-1.8 1.7-3.8 3.7l-3.6 3.5-3.6-3.5c-2-2-3.7-3.6-3.8-3.7-.4-.3-.8-.5-1.2-.5-.2 0-.4 0-.6.1z" fill="var(--color-primary)"/></svg>
        </div>
        <div class="accordion-content">
          <p style="line-height:1.8;color:#555">Emerald double-lined satin, bias-cut skirt that keeps its flow, and an inner modesty snap keep everything secure. The wrap belt features a hidden grip strip so it doesn't loosen mid-transition, and the neckline is cut to show collarbones without gaping.</p>
          <ul style="margin-top:16px;padding-left:20px;line-height:1.8;color:#555">
            <li>Adjustable wrap waist with extra-long ties</li>
            <li>Color-calibrated emerald that stays vivid on camera</li>
            <li>Soft ponte lining to prevent sheerness</li>
            <li>Hidden grit strip + snap for no-slip styling</li>
            <li>Bias-cut skirt for floaty movement</li>
            <li>Copper micro-hardware for subtle shine</li>
            <li>Back elastic panel for comfort while seated</li>
          </ul>
        </div>
      </div>

      <!-- Size Guide -->
      <div class="accordion-section">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="icon-container"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.8 4.2c-.4.2-.7.6-.8 1-.1.3-.1 1.8-.1 11.8s0 11.5.1 11.8c.2.6.6 1 1.2 1.2.4.1 1.6.1 11.8.1s11.4 0 11.8-.1c.6-.2 1-.6 1.2-1.2.1-.3.1-1.8.1-11.8s0-11.5-.1-11.8c-.2-.6-.6-1-1.2-1.2-.4-.1-1.6-.1-11.8-.1-9.8 0-11.4 0-11.8.2 0 .1-.2.1-.4.1zm23.4 1.9c.2.2.3.4.3.8v.6H4.5v-.6c0-.4.1-.6.3-.8.2-.2.4-.3.8-.3h20.8c.4 0 .6.1.8.3zM4.8 17v9.2h-.3c-.4 0-.6-.1-.8-.3-.2-.2-.3-.4-.3-.8V8.5h22.1v16.6c0 .4-.1.6-.3.8-.2.2-.4.3-.8.3h-.3V17c0-5.1 0-9.2-.1-9.2s-9.3 0-9.7.1l-.3.1v18.2l-4.6-.1-4.6-.1V17z" fill="var(--color-primary)"/></svg></div>
            <span>Size Guide</span>
          </div>
          <svg class="accordion-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7.8c-.4.2-.7.6-.8 1.1-.1.7.1 1.2.6 1.7l5.3 5.3c.4.4.7.6 1.2.7.7.1 1.2-.1 1.7-.6l5.3-5.3c.5-.5.7-1 .6-1.7-.1-.5-.4-.9-.8-1.1-.5-.2-1-.1-1.5.3-.1.1-1.8 1.7-3.8 3.7l-3.6 3.5-3.6-3.5c-2-2-3.7-3.6-3.8-3.7-.4-.3-.8-.5-1.2-.5-.2 0-.4 0-.6.1z" fill="var(--color-primary)"/></svg>
        </div>
        <div class="accordion-content">
          <p style="line-height:1.8;color:#555;margin-bottom:16px">Runs true to size thanks to the wrap waist. Tighten the belt for extra snatch or loosen for brunch room. Between sizes? Size down for a fitted waist, up for more movement.</p>
          <table style="width:100%;border-collapse:collapse;margin-top:12px">
            <tr style="background:#f8f9fa;font-weight:600">
              <td style="padding:12px;border:1px solid #e0e0e0">Size</td>
              <td style="padding:12px;border:1px solid #e0e0e0">Bust</td>
              <td style="padding:12px;border:1px solid #e0e0e0">Waist</td>
            </tr>
            <tr>
              <td style="padding:12px;border:1px solid #e0e0e0">XS</td>
              <td style="padding:12px;border:1px solid #e0e0e0">30-32"</td>
              <td style="padding:12px;border:1px solid #e0e0e0">23-25"</td>
            </tr>
            <tr>
              <td style="padding:12px;border:1px solid #e0e0e0">S</td>
              <td style="padding:12px;border:1px solid #e0e0e0">32-34"</td>
              <td style="padding:12px;border:1px solid #e0e0e0">25-27"</td>
            </tr>
            <tr>
              <td style="padding:12px;border:1px solid #e0e0e0">M</td>
              <td style="padding:12px;border:1px solid #e0e0e0">34-36"</td>
              <td style="padding:12px;border:1px solid #e0e0e0">27-30"</td>
            </tr>
            <tr>
              <td style="padding:12px;border:1px solid #e0e0e0">L</td>
              <td style="padding:12px;border:1px solid #e0e0e0">36-39"</td>
              <td style="padding:12px;border:1px solid #e0e0e0">30-33"</td>
            </tr>
            <tr>
              <td style="padding:12px;border:1px solid #e0e0e0">XL</td>
              <td style="padding:12px;border:1px solid #e0e0e0">39-42"</td>
              <td style="padding:12px;border:1px solid #e0e0e0">33-37"</td>
            </tr>
          </table>
        </div>
      </div>

      <!-- Shipping Info -->
      <div class="accordion-section">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="icon-container"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.2 8.3c-.3.1-.5.4-.6.7L3 12.8v11.4c0 1.3.4 1.8 1.6 2.1.5.1 1.2.2 1.6.1.6-.1.8-.3 1.2-1 .5-1 1.3-1.4 2.4-1.4 1.8 0 3.1 1.3 3.1 3.1 0 .6.1.7.9.7h8.5c.8 0 .9-.1.9-.7 0-1.8 1.3-3.1 3.1-3.1s3.1 1.3 3.1 3.1c0 .6.1.7.9.7.7 0 .9-.1 1.1-.7.1-.4.2-2.4.2-4.5v-3.8l-1.3-2.6c-.7-1.5-1.5-2.8-1.7-2.9-.3-.2-1.9-.3-4.8-.3h-4.3V9.1c0-3.7 0-3.9-.4-4.2-.3-.3-.7-.3-8.8-.3-6.4 0-8.6.1-9 .3-.3.2-.4.6-.4 2.1v1.8h-1.4c-1.2 0-1.5.1-1.8.5z" fill="var(--color-primary)"/></svg></div>
            <span>Shipping Info</span>
          </div>
          <svg class="accordion-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7.8c-.4.2-.7.6-.8 1.1-.1.7.1 1.2.6 1.7l5.3 5.3c.4.4.7.6 1.2.7.7.1 1.2-.1 1.7-.6l5.3-5.3c.5-.5.7-1 .6-1.7-.1-.5-.4-.9-.8-1.1-.5-.2-1-.1-1.5.3-.1.1-1.8 1.7-3.8 3.7l-3.6 3.5-3.6-3.5c-2-2-3.7-3.6-3.8-3.7-.4-.3-.8-.5-1.2-.5-.2 0-.4 0-.6.1z" fill="var(--color-primary)"/></svg>
        </div>
        <div class="accordion-content">
          <p style="line-height:1.8;color:#555">Ships within 24 hours from our LA + EU studios. Free standard shipping (3-5 days) worldwide, or upgrade to express courier (1-2 days) for $12. Tracking is live-synced to SMS and email.</p>
        </div>
      </div>

      <!-- Returns Policy -->
      <div class="accordion-section">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="icon-container"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.8 4.2c-3.2.4-6.1 1.8-8.5 4.1-2.8 2.7-4.5 6.2-4.9 10.2-.1 1.3-.1 1.8.1 2.3.3.8.9 1.3 1.7 1.5.9.2 1.7-.1 2.2-.8.3-.4.4-.7.5-1.6.3-3.2 1.6-6 3.8-8.2 2.7-2.7 6.1-4.1 9.8-4.1 2.9 0 5.5.9 7.8 2.6 1.1.8 2.5 2.2 3.3 3.3 1.7 2.3 2.6 4.9 2.6 7.8 0 3.7-1.4 7.1-4.1 9.8-2.2 2.2-5 3.5-8.2 3.8-.9.1-1.2.2-1.6.5-.7.5-1 1.3-.8 2.2.2.8.7 1.4 1.5 1.7.5.2 1 .2 2.3.1 4-.4 7.4-1.9 10.2-4.1 2.3-2.4 3.7-5.3 4.1-8.5.1-.7.2-2.7.1-3.5-.4-3.2-1.8-6.1-4.1-8.5-2.7-2.8-6.2-4.5-10.2-4.9-.7-.1-2.7-.1-3.5.1z" fill="var(--color-primary)"/></svg></div>
            <span>Returns Policy</span>
          </div>
          <svg class="accordion-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7.8c-.4.2-.7.6-.8 1.1-.1.7.1 1.2.6 1.7l5.3 5.3c.4.4.7.6 1.2.7.7.1 1.2-.1 1.7-.6l5.3-5.3c.5-.5.7-1 .6-1.7-.1-.5-.4-.9-.8-1.1-.5-.2-1-.1-1.5.3-.1.1-1.8 1.7-3.8 3.7l-3.6 3.5-3.6-3.5c-2-2-3.7-3.6-3.8-3.7-.4-.3-.8-.5-1.2-.5-.2 0-.4 0-.6.1z" fill="var(--color-primary)"/></svg>
        </div>
        <div class="accordion-content">
          <p style="line-height:1.8;color:#555">30-day exchanges or returns. Use the prepaid label tucked into every box and we issue crypto or card refunds the moment the label is scanned.</p>
        </div>
      </div>

      <!-- Care Instructions -->
      <div class="accordion-section">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="icon-container"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.8 3.2c-1.6.4-2.9 1.3-3.8 2.6-.9 1.3-1.2 2.4-1.2 4.2 0 2.3.6 3.7 2.4 5.8 1.1 1.3 2.3 2.4 5.3 4.8 2 1.6 3.8 3.1 4 3.3.5.4 1.1.4 1.6 0 .2-.2 2-1.7 4-3.3 3-2.4 4.2-3.5 5.3-4.8 1.8-2.1 2.4-3.5 2.4-5.8 0-1.8-.3-2.9-1.2-4.2-1.3-1.9-3.2-3-5.4-3-1.5 0-2.6.4-3.8 1.3-.8.6-1.1 1-1.9 2.1l-.8 1.1-.8-1.1c-.8-1.1-1.1-1.5-1.9-2.1-1.2-.9-2.3-1.3-3.8-1.3-.4 0-1 .1-1.4.4z" fill="var(--color-primary)"/></svg></div>
            <span>Care Instructions</span>
          </div>
          <svg class="accordion-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7.8c-.4.2-.7.6-.8 1.1-.1.7.1 1.2.6 1.7l5.3 5.3c.4.4.7.6 1.2.7.7.1 1.2-.1 1.7-.6l5.3-5.3c.5-.5.7-1 .6-1.7-.1-.5-.4-.9-.8-1.1-.5-.2-1-.1-1.5.3-.1.1-1.8 1.7-3.8 3.7l-3.6 3.5-3.6-3.5c-2-2-3.7-3.6-3.8-3.7-.4-.3-.8-.5-1.2-.5-.2 0-.4 0-.6.1z" fill="var(--color-primary)"/></svg>
        </div>
        <div class="accordion-content">
          <p style="line-height:1.8;color:#555">Steam after unboxing or press on low with a cloth barrier. Hand wash or machine delicate inside a mesh bag, then lay flat to dry. Avoid bleach to protect the emerald pigment.</p>
        </div>
      </div>
    </div>

    <!-- Testimonials Section -->
    <div class="fade-in" style="padding:60px 20px;background:#f8f9fa">
      <div style="max-width:1200px;margin:0 auto">
        <h2 style="text-align:center;font-size:28px;font-weight:700;margin-bottom:16px">Creator Receipts</h2>
        <p style="text-align:center;color:#666;margin-bottom:40px">12 TikTok POVs, 8 IG carousels, 10 trust reviews</p>

        <div id="testimonialGrid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100%,350px),1fr));gap:24px">
          ${renderTestimonials(12)}
        </div>

        <div style="text-align:center;margin-top:40px">
          <button id="loadMoreBtn" onclick="loadMoreReviews()" style="background:var(--color-primary);color:#fff;border:none;padding:16px 40px;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.2s;min-height:44px">
            Load More Love
          </button>
        </div>
      </div>
    </div>

    <!-- Final CTA -->
    <div class="fade-in" style="padding:80px 20px;text-align:center;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-light) 100%);color:#fff">
      <h2 style="font-size:clamp(28px,5vw,40px);font-weight:700;margin-bottom:16px">Glow in Gemini Green</h2>
      <p style="font-size:18px;opacity:0.9;margin-bottom:30px;max-width:500px;margin-left:auto;margin-right:auto">Limited micro-run. Free tailoring support + exchanges.</p>
      <button onclick="document.querySelector('.product-hero').scrollIntoView({behavior:'smooth'})" style="background:#fff;color:var(--color-primary);border:none;padding:18px 50px;border-radius:8px;font-size:18px;font-weight:700;cursor:pointer;transition:all 0.2s;min-height:44px">
        Jump to Hero
      </button>
    </div>
  `;

  // Animate elements
  requestAnimationFrame(() => {
    document.querySelectorAll('.fade-in').forEach((el, i) => {
      setTimeout(() => el.classList.add('visible'), i * 100);
    });
  });
}

function renderTestimonials(count) {
  return testimonials.slice(0, count).map(t => `
    <div class="testimonial-card">
      <div class="testimonial-header">
        <img src="./images/testimonials/testimonial-${String(t.img).padStart(2, '0')}.jpeg" alt="${t.name}" class="testimonial-avatar" loading="lazy">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>${t.handle ? `${t.handle} · ` : ''}Verified on ${t.platform.charAt(0).toUpperCase() + t.platform.slice(1)}</span>
          </div>
        </div>
        <div class="testimonial-stars">${'★'.repeat(t.rating)}${'☆'.repeat(5-t.rating)}</div>
      </div>
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-date">${t.date}</div>
    </div>
  `).join('');
}

let reviewsLoaded = 12;
function loadMoreReviews() {
  const grid = document.getElementById('testimonialGrid');
  const remaining = testimonials.slice(reviewsLoaded);

  remaining.forEach((t, i) => {
    const card = document.createElement('div');
    card.className = 'testimonial-card';
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    card.innerHTML = `
      <div class="testimonial-header">
        <img src="./images/testimonials/testimonial-${String(t.img).padStart(2, '0')}.jpeg" alt="${t.name}" class="testimonial-avatar" loading="lazy">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>${t.handle ? `${t.handle} · ` : ''}Verified on ${t.platform.charAt(0).toUpperCase() + t.platform.slice(1)}</span>
          </div>
        </div>
        <div class="testimonial-stars">${'★'.repeat(t.rating)}${'☆'.repeat(5-t.rating)}</div>
      </div>
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-date">${t.date}</div>
    `;
    grid.appendChild(card);

    setTimeout(() => {
      card.style.transition = 'all 0.4s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, i * 50);
  });

  reviewsLoaded = testimonials.length;
  document.getElementById('loadMoreBtn').style.display = 'none';
}

// Initialize on load
window.addEventListener('load', () => {
  perfMetrics.mark('window-loaded');
  console.log('Performance Metrics:', perfMetrics.marks);
});
</script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js').catch(() => {});
  });
}
</script>

</body>
</html>
